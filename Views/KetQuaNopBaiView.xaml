<Window x:Class="SEP490_G18_GESS_DESKTOPAPP.Views.KetQuaNopBaiView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SEP490_G18_GESS_DESKTOPAPP.Views"
        mc:Ignorable="d"
        Title="Kết quả bài thi" 
        WindowState="Maximized"
        WindowStyle="None"
        Background="#F8F9FA">

    <Window.Resources>
        <!-- Colors -->
        <SolidColorBrush x:Key="PrimaryBlue" Color="#0066CC"/>
        <SolidColorBrush x:Key="SuccessGreen" Color="#00AA44"/>
        <SolidColorBrush x:Key="TextGray" Color="#6C757D"/>

        <!-- Converter -->
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>

    <Grid>



        <!-- Main Content -->
        <Grid Margin="0,60,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="400"/>
            </Grid.ColumnDefinitions>

            <!-- Left Content -->
            <StackPanel Grid.Column="0" Margin="80,80,40,0" MaxWidth="600" HorizontalAlignment="Left">

                <!-- Title -->
                <TextBlock Text="Đã nhận được bài thi của bạn," 
                         FontSize="32" FontWeight="Bold" 
                         Foreground="#1A1A1A" Margin="0,0,0,5"/>

                <!-- Subject Name -->
                <TextBlock Text="{Binding SubjectName}" 
                         FontSize="28" FontWeight="SemiBold" 
                         Foreground="#333" Margin="0,0,0,30"/>

                <!-- Description -->
                <TextBlock FontSize="15" Foreground="#6C757D" TextWrapping="Wrap" 
                         LineHeight="24" Margin="0,0,0,30">
                    <Run Text="Chúng tôi đã nhận được bài thi của bạn, vui lòng thông báo với giám thị coi thi để"/>
                    <Run FontStyle="Italic" Text=" được hướng dẫn ký nhận và nạp bài"/>
                    <Run Text=". Lưu ý, kết quả chỉ được công nhận khi bạn đã điểm danh và ký nạp bài."/>
                </TextBlock>

                <!-- Status -->
                <StackPanel Margin="0,0,0,20">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse Width="20" Height="20" Fill="{StaticResource SuccessGreen}" Margin="0,0,0,0"/>
                        <Path Data="M4,10 L8,14 L16,6" Stroke="White" StrokeThickness="2" 
                              Width="12" Height="12" Stretch="Uniform" 
                              Margin="-16,0,10,0" VerticalAlignment="Center"/>
                        <TextBlock Text="Đã nộp bài" FontSize="15" 
                                 Foreground="{StaticResource SuccessGreen}" 
                                 VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>

                <!-- Exam Info -->
                <StackPanel Margin="0,0,0,40">
                    <!-- Time -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="⏱ Thời gian làm bài: " FontSize="15" 
                                 Foreground="#6C757D" VerticalAlignment="Center"/>
                        <TextBlock Text="{Binding TimeTaken}" FontSize="15" 
                                 Foreground="#333" FontWeight="SemiBold" VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Result -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8"
                               Visibility="{Binding ShowScore, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock Text="📊 Kết quả: " FontSize="15" 
                                 Foreground="#6C757D" VerticalAlignment="Center"/>
                        <TextBlock FontSize="15" Foreground="#333" 
                                 FontWeight="SemiBold" VerticalAlignment="Center">
                            <TextBlock.Text>
                                <MultiBinding StringFormat="{}{0} / {1} ({2:F0}%)">
                                    <Binding Path="CorrectCount"/>
                                    <Binding Path="TotalCount"/>
                                    <Binding Path="Percentage"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </StackPanel>

                    <!-- Score -->
                    <StackPanel Orientation="Horizontal"
                               Visibility="{Binding ShowScore, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock Text="🎯 Thang điểm 10: " FontSize="15" 
                                 Foreground="#6C757D" VerticalAlignment="Center"/>
                        <TextBlock FontSize="15" Foreground="#333" 
                                 FontWeight="Bold" VerticalAlignment="Center">
                            <TextBlock.Text>
                                <MultiBinding StringFormat="{}{0:F1} điểm">
                                    <Binding Path="FinalScore"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </StackPanel>
                </StackPanel>

                <!-- Back Button -->
                <Button HorizontalAlignment="Left" Cursor="Hand"
                        Command="{Binding BackToHomeCommand}">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <TextBlock Text="Trở về trang chủ" 
                                     FontSize="15" 
                                     Foreground="{StaticResource PrimaryBlue}"
                                     TextDecorations="Underline"/>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </StackPanel>

            <!-- Right Illustration -->
            <Grid Grid.Column="1" VerticalAlignment="Center" Margin="102,0,-22,0">
                <Canvas Width="300" Height="400" Margin="-151,-32,171,32">
                    <!-- Simple illustration -->
                    <Path Data="M50,200 Q150,100 250,200 T450,200" 
                          Stroke="#E1E5EA" StrokeThickness="2" Fill="Transparent"/>

                    <!-- Character celebrating -->
                    <Ellipse Width="60" Height="60" Fill="#FFE0B2" Canvas.Left="120" Canvas.Top="150"/>
                    <Path Data="M120,180 Q150,220 150,250" Stroke="#333" StrokeThickness="3" Fill="Transparent"/>
                    <Path Data="M150,250 L130,280 M150,250 L170,280" Stroke="#333" StrokeThickness="3"/>
                    <Path Data="M150,200 L120,180 M150,200 L180,180" Stroke="#333" StrokeThickness="3"/>

                    <!-- Hand waving -->
                    <Path Data="M180,180 Q190,170 200,180" Stroke="#333" StrokeThickness="3" Fill="#FFE0B2"/>
                    <Ellipse Width="20" Height="20" Fill="#FFE0B2" Canvas.Left="190" Canvas.Top="170"/>
                </Canvas>
            </Grid>
        </Grid>
    </Grid>
</Window>